---
title: Migrando desde Next.js
description: Consejos para migrar un proyecto existente de Next.js a Astro
type: migration
stub: false
framework: Next.js
i18nReady: true
---
import AstroJSXTabs from '~/components/tabs/AstroJSXTabs.astro'
import PackageManagerTabs from '~/components/tabs/PackageManagerTabs.astro'

Here are some key concepts and migration strategies to help you get started. Use the rest of our docs and our [Discord community](https://astro.build/chat) to keep going!

## Principales similitudes entre Next.js y Astro

Next.js y Astro comparten algunas similitudes que te ayudar√°n a migrar tu proyecto:

- The [syntax of `.astro` files is similar to JSX](/en/core-concepts/astro-syntax/#differences-between-astro-and-jsx). Writing Astro should feel familiar.
- Astro projects can also be SSG or [SSR with page-level prerendering](/en/guides/server-side-rendering/#hybrid-rendering).
- Astro uses file-based routing, and [allows specially named pages to create dynamic routes](/en/core-concepts/routing/#dynamic-routes).
- Astro is [component-based](/en/core-concepts/astro-components/), and your markup structure will be similar before and after your migration.
- Astro has [official integrations for React, Preact, and Solid](/en/guides/integrations-guide/react/) so you can use your existing JSX components. Note that in Astro, these files **must** have a `.jsx` or `.tsx` extension.
- Astro has support for [installing NPM packages](/en/guides/imports/#npm-packages), including React libraries. Many of your existing dependencies will work in Astro.

## Principales diferencias entre Next.js y Astro

Cuando reconstruyas tu sitio de Next.js a Astro, notar√°s algunas diferencias importantes:

- [MPA vs SPA](/en/concepts/mpa-vs-spa/): Next.js is a React single-page app, and uses `index.js` as your project's root. Astro is a multi-page site, and `index.astro` is your home page.

- [`.astro` components](/en/core-concepts/astro-components/) are not written as exported functions that return page templating. Instead, you'll split your code into a "code fence" for your JavaScript and a body exclusively for the HTML you generate.

- [Content-focus](/en/concepts/why-astro/): Astro was designed primarily for content-focused sites with small pieces of interactivity. An existing Next.js app might be built for high client-side interactivity and may include items that are difficult to replicate using `.astro` components, such as dashboards.

## Migrar tu proyecto de Next.js

Each project migration will look different, but there are some common actions you will perform when converting from Next.js to Astro.

### Crear un nuevo proyecto de Astro
Use the `create astro` command for your package manager to launch Astro's CLI wizard or choose a community theme from the [Astro Theme Showcase](https://astro.build/themes).

You can pass a `--template` argument to the `create astro` command to start a new Astro project with one of our official starters (e.g. `docs`, `blog`, `portfolio`). Or, you can [start a new project from any existing Astro repository on GitHub](/en/install/auto/#starter-templates).

  <PackageManagerTabs>
    <Fragment slot="npm">
    ```shell
    # launch the Astro CLI Wizard 
    npm create astro@latest

    # create a new project with an official example
    npm create astro@latest -- --template <example-name>
    ```
    </Fragment>
    <Fragment slot="pnpm">
    ```shell
    # launch the Astro CLI Wizard 
    pnpm create astro@latest

    # create a new project with an official example
    pnpm create astro@latest --template <example-name>
    ```
    </Fragment>
    <Fragment slot="yarn">
    ```shell
    # launch the Astro CLI Wizard 
    yarn create astro@latest

    # create a new project with an official example
    yarn create astro@latest --template <example-name>
    ```
    </Fragment>
  </PackageManagerTabs>

Then, copy your existing Next project files over to your new Astro project in a separate folder outside of `src`.

:::tip
Visit https://astro.new for the full list of official starter templates, and links for opening a new project in StackBlitz, CodeSandbox, or Gitpod.
:::

### Instalar integraciones (opcional)

You may find it useful to install some of [Astro's optional integrations](/en/guides/integrations-guide/) to use while converting your Next project to Astro:

- **@astrojs/react**: to reuse some existing React UI components in your new Astro site, or keep writing with React components.

- **@astrojs/image**: to replace Next's Image plugin with Astro's own image-optimizing components. (Experimental: works in `.astro` and `.mdx` files only.)

- **@astrojs/mdx**: to bring existing MDX files from your Next project, or to use MDX in your new Astro site.

### Coloca tu c√≥digo fuente en `src`

Following [Astro's project structure](/en/core-concepts/project-structure/):

1. **Keep** Next's `public/` folder untouched. 
   
    Astro uses the `public/` directory for static assets, just like Next. There is no change needed to this folder, nor its contents.

2. **Copy or Move** Next's other files and folders (e.g. `pages`, `styles` etc.) into Astro's `src/` folder as you rebuild your site, following [Astro's project structure](/en/core-concepts/project-structure/).

    Like Next, Astro's `src/pages/` folder is a special folder used for file-based routing. All other folders are optional, and you can organize the contents of your `src/` folder any way you like. Other common folders in Astro projects include `src/layouts/`, `src/components`, `src/styles`, `src/scripts`.


### El archivo de configuraci√≥n de Astro

Astro has a configuration file at the root of your project called [`astro.config.mjs`](/en/guides/configuring-astro/). This is used only for configuring your Astro project and any installed integrations, including [SSR adapters](/en/guides/deploy/).

### Consejos: Convertir archivos JSX a archivos `.astro`

Here are some tips for converting a Next `.js` component into a `.astro` component:

1. Use the returned JSX of the existing Next.js component function as the basis for your HTML template.

2. Change any [Next or JSX syntax to Astro](#reference-convert-nextjs-syntax-to-astro) or to HTML web standards. This includes `<Link>`, `<Script>`, `{children}`, and `className`, for example.

1. Move any necessary JavaScript, including import statements, into a ["code fence" (`---`)](/en/core-concepts/astro-components/#the-component-script). Note: JavaScript to [conditionally render content](/en/core-concepts/astro-syntax/#dynamic-html) is often written inside the HTML template directly in Astro.

4. Use [`Astro.props`](/en/reference/api-reference/#astroprops) to access any additional props that were previously passed to your Next function.

4. Decide whether any imported components also need to be converted to Astro. With the official integration installed, you can [use existing React components in your Astro file](/en/core-concepts/framework-components/). But, you may want to convert them to `.astro` components, especially if they do not need to be interactive!

4. Replace `getStaticProps()` with import statements or [`Astro.glob()`](/en/reference/api-reference/#astroglob) to query your local files. Use `fetch()` to fetch external data.

See [an example of a Next `.js` file converted step-by-step](#guided-example-next-data-fetching-to-astro).

#### Comparaci√≥n: JSX vs Astro

Compare the following Next component and a corresponding Astro component:

<AstroJSXTabs>
  <Fragment slot="jsx">
    ```jsx title="StarCount.jsx"
    import Header from "./header";
    import Footer from './footer';
    import "./layout.css";

    export async function getStaticProps() {
        const res = await fetch('https://api.github.com/repos/withastro/astro')
        const json = await res.json()
        return {
            props: { message: json.message, stars: json.stargazers_count || 0 },
        }
    }

    const Component = ({ stars, message }) => {
        
        return (
            <>
                <Header />
                <p style={{
                    backgroundColor: `#f4f4f4`,
                    padding: `1em 1.5em`,
                    textAlign: `center`,
                    marginBottom: `1em`
                }}>Astro has {stars} üßë‚ÄçüöÄ</p>
                <Footer />
            </>
        )
    }

    export default Component;
    ```
  </Fragment>
  <Fragment slot="astro">
    ```astro title="StarCount.astro"
    ---
    import Header from "./header";
    import Footer from "./footer";
    import "./layout.css";

    const res = await fetch('https://api.github.com/repos/withastro/astro')
    const json = await res.json()
    const message = json.message;
    const stars = json.stargazers_count || 0;
    ---
    <Header />
    <p class="banner">Astro has {stars} üßë‚ÄçüöÄ</p>
    <Footer />

    <style>
      .banner {
        background-color: #f4f4f4; 
        padding: 1em 1.5em;
        text-align: center;
        margin-bottom: 1em;
      }
    <style>
    ```
  </Fragment>
</AstroJSXTabs>

### Migrando archivos de dise√±o

You may find it helpful to start by converting your Next.js layouts and templates into [Astro layout components](/en/core-concepts/layouts/).

Next has two different methods for creating layout files, each of which handles layouts differently than Astro:

- The `pages` directory

- [The `/app` directory (in beta)](https://beta.nextjs.org/docs/routing/pages-and-layouts#layouts)

Each Astro page explicitly requires `<html>`, `<head>`, and `<body>` tags to be present, so it is common to reuse a layout file across pages. Astro uses a [`<slot />`](/en/core-concepts/astro-components/#slots) for page content, with no import statement required. Note the standard HTML templating, and direct access to `<head>`:  

```astro title="src/layouts/Layout.astro"
---
---
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Astro</title>
	</head>
	<body>
    <!-- Wrap the slot element with your existing layout templating -->
		<slot />
	</body>
</html>
```

#### Migrando desde el directorio `pages` de Next.js

Your Next project may have a `pages/_document.jsx` file that imports React components to customize your app's `<head>`:

```jsx title="pages/_document.jsx"
import Document, { Html, Head, Main, NextScript } from "next/document";

export default class MyDocument extends Document {
  render() {
    return (
      <Html lang="en">
        <Head>
          <link rel="icon" href="/favicon.ico" />
        </Head>
        <body>
          <Main />
          <NextScript />
        </body>
      </Html>
    );
  }
}
```

1. Make a new Astro layout file using only the returned JSX.

2. Replace any React components with `<html>`, `<head>`, `<slot>`, and other HTML standard tags.


```astro title="src/layouts/Document.astro"
<html lang="en">
	<head>
	    <link rel="icon" href="/favicon.ico" />
	</head>
	<body>
		<slot/>
	</body>
</html>
```

#### Migrando desde el directorio `/app` de Next.js

Next.js' `app/` directory layout files are created with two files: a `layout.jsx` file to customize the `<html>` and `<body>` contents, and a `head.jsx` file to customize the `<head>` element contents.

```jsx title="app/layout.jsx"
export default function Layout({ children }) {
  return (
    <html lang="en">
      <body>{children}</body>
    </html>
  );
}
```

```jsx title="app/head.jsx"
export default function Head() {
  return (
    <>
      <title>My Page</title>
    </>
  );
}
```

1. Make a new Astro layout file using only the returned JSX.

2. Replace both these files with a single Astro layout file that contains a page shell (`<html>`, `<head>`, and `<body>` tags) and a `<slot/>` instead of React's `{children}` prop:

```astro title="src/layouts/Layout.astro"
<html lang="en">
	<head>
	    <title>My Page</title>
	</head>
	<body>
		<slot/>
	</body>
</html>
```

### Migrando p√°ginas y publicaciones

In Next.js, your posts either live in `/pages` or `/app/routeName/page.jsx`.

In Astro, **all your page content must live within `src/`**, in either `src/pages` or `src/content`.

#### P√°ginas de React

Your existing Next JSX (`.js`) pages will need to be [converted from JSX files to `.astro` pages](#tips-convert-jsx-files-to-astro-files). You cannot use an existing JSX page file in Astro.

These [`.astro` pages](/en/core-concepts/astro-pages/) must be located within `src/pages/` and will have page routes generated automatically based on their file path.

#### P√°ginas de Markdown y MDX

Astro has built-in support for Markdown and an optional integration for MDX files. You can reuse any existing [Markdown and MDX files](/en/guides/markdown-content/), but they may require some adjustments to their frontmatter, such as adding [Astro's special `layout` frontmatter property](/es/core-concepts/layouts/#plantillas-de-markdownmdx). You will no longer need to manually create pages for each Markdown-generated route. These files can be placed within `src/pages/` to take advantage of automatic file-based routing.

Alternatively, you can use [content collections](/en/guides/content-collections/) in Astro to store and manage your content. When part of a collection, Markdown and MDX files will live in folders within `src/content/`. You will retrieve the content yourself and [generate those pages dynamically](/en/guides/content-collections/#generating-routes-from-content).

### Migrando Tests

Como Astro produce HTML sin procesar, es posible escribir tests end-to-end utilizando la salida del paso de compilaci√≥n. Cualquier test end-to-end escrito anteriormente  podr√≠a funcionar sin problemas si has podido coincidir con el marcado de tu sitio de Next. Bibliotecas de testing como Jest y React Testing Library pueden ser importadas y utilizadas en Astro para testear tus componentes de React.

Consulta la [gu√≠a de testing](/es/guides/testing/) de Astro para obtener m√°s informaci√≥n.

## Referencia: C√≥mo convertir la sintaxis de Next.js a Astro

### Migrando los enlaces de Next a Astro

Convierte cualquier componente de Next `<Link to="">`, `<NavLink>` etc. a etiquetas HTML `<a href="">`. 

```astro del={1} ins={2}
<Link to="/blog">Blog</Link>
<a href="/blog">Blog</a>
```

Astro no utiliza ning√∫n componentes especial para los enlaces, aunque puedes crear tu propio componente `<Link>`. Luego puedes importar y usar este `<Link>` como lo har√≠as con cualquier otro componente.

```astro title="src/components/Link.astro"
---
const { to } = Astro.props
---
<a href={to}><slot /></a>
```

### Migrando las importaciones de Next a Astro

Actualiza cualquier [importaci√≥n de archivos](/es/guides/imports/) para referencias rutas de archivo relativas de maneta exacta. Esto puede hacerse utilizando un [alias de importaci√≥n](/es/guides/typescript/#alias-de-importaci√≥n), o escribiendo la ruta relativa completa. 

Ten encuenta que `.astro` y varios otros tipos de archivos deben ser importados con su extensi√≥n de achivo completa.

```astro title="src/pages/authors/Fred.astro"
---
import Card from `../../components/Card.astro`
---
<Card />
```

### Migrando las propiedades Children de Next a Astro

Convierte cualquier instancia de `{children}` a un elemento `<slot />` de Astro. Astro no necesita recibir `{children}` como una funci√≥n prop y autom√°ticamente renderizar√° `<slot />`.

```astro title="src/components/MyComponent" del={3-9} ins={11-13}
---
---
export default function MyComponent(props) { 
    return (
      <div>
        {props.children}
      </div>
    );  
}

<div>
  <slot />
</div>
```

Los componentes de React que pasan m√∫ltiples conjuntos de hijos se pueden migrar a un un componente de Astro usando [slots con nombre](/es/core-concepts/astro-components/#slots-con-nombre).

Ver m√°s acerca del [uso especifico de `<slot />` en Astro](/es/core-concepts/astro-components/#slots).

### Migrando la obtenci√≥n de datos de Next a Astro

Convierte cualquier instancia de `getStaticProps()` a `Astro.glob()` o `getCollection()`/`getEntryBySlug()` para acceder a los datos de otros archivos en la ra√≠z de tu proyecto. Para [obtener datos remotos](/es/guides/data-fetching/), usa `fetch()`.

Estas solicitudes de datos se realizan en el frontmatter del componente de Astro y utilizan el operador await a nivel superior.

```astro title="src/pages/index.astro"
---
import { getCollection } from 'astro:content';

// Obtener todas las entradas `src/content/blog/`
const allBlogPosts = await getCollection('blog');

// Obtener todas las entradas `src/pages/posts/`
const allPosts = await Astro.glob('../pages/posts/*.md');

const response = await fetch('https://randomuser.me/api/');
const data = await response.json();
const randomUser = data.results[0];
---
```

Ver m√°s acerca de [importaciones de archivos locales con `Astro.glob()`](/es/guides/imports/#astroglob), [consultas usando la API de colecciones](/es/guides/content-collections/#querying-collections) o [obtenci√≥n de datos remotos](/es/guides/data-fetching/).

### Migrando el sistema de estilos de Next a Astro

Es posible que debas reemplazar cualquier [biblioteca de CSS-in-JS](https://github.com/withastro/astro/issues/4432) (p. ej. styled-components) con otras opciones de CSS disponibles en Astro.

Si es necesario, convierte cualquier objeto de estilo en l√≠nea (`style={{ fontWeight: "bold" }}`) a atributos de estilo HTML en l√≠nea (`style="font-weight:bold;"`). O, usa una [etiqueta `<style>` de Astro](/es/guides/styling/#estilando-en-astro) para estilos CSS con √°mbito limitado.

```astro title="src/components/Card.astro" del={1} ins={2}
<div style={{backgroundColor: `#f4f4f4`, padding: `1em`}}>{message}</div>
<div style="background-color: #f4f4f4; padding: 1em;">{message}</div>
```

Tailwind es compatible despu√©s de instalar la [integraci√≥n de Tailwind](/es/guides/integrations-guide/tailwind/). ¬°No se requieren cambios en tu c√≥digo de Tailwind existente!

Ver m√°s acerca de [Estilos en Astro](/es/guides/styling/).

### Plugin de Imagen de Next a Astro

Convierte cualquier componente `<Image />` de Next a los [propios componentes de integraci√≥n de imagen de Astro](/es/guides/images/#integraci√≥n-image-de-astro), o a un est√°ndar HTML `<img>`. Consulta [la lista completa de los atributos de los componentes](/es/guides/integrations-guide/image/#usage) disponibles para los componentes `<Image />` y `<Picture />` de Astro, y ten en cuenta que varios difieren de los atributos de Next. 

```astro title="src/pages/index.astro"
---
import { Image } from '@astrojs/image/components';
import localImage from "../images/brand/logo.png";
import rocket from '../images/rocket.svg';
---
<Image src={localImage} alt="The Astro Logo" />
<img src={rocket} alt="A rocketship in space.">
```

En los componentes de React (`.jsx`), utiliza la sintaxis est√°ndar de imagen (`<img />`). Astro no optimizar√° estas im√°genes, pero puedes instalar y usar paquetes de NPM  para obtener m√°s flexibilidad.

Puedes aprender m√°s sobre [c√≥mo usar im√°genes en Astro](/es/guides/images/) en la Gu√≠a de Im√°genes.



## Ejemplo guiado: C√≥mo migrar la obtenci√≥n de datos en Next a Astro

Aqu√≠ tienes un ejemplo de c√≥mo obtener datos de una Pok√©dex en Next.js y c√≥mo convertirlo a Astro.
    
`pages/index.js` obtiene y muestra una lista de los primeros 151 Pok√©mon utilizando [la REST Pok√©API](https://pokeapi.co/).

Aqu√≠ te mostramos c√≥mo recrear eso en `src/pages/index.astro`, remplazando `getStaticProps()` con `fetch()`.

1. Identifica el JSX de return().

```jsx title="pages/index.js" {6-18}
import Link from 'next/link'
import styles from '../styles/poke-list.module.css';

export default function Home({ pokemons }) {
    return (
        <>
            <ul className={`plain-list ${styles.pokeList}`}>
                {pokemons.map((pokemon) => (
                    <li className={styles.pokemonListItem} key={pokemon.name}>
                        <Link className={styles.pokemonContainer} as={`/pokemon/${pokemon.name}`} href="/pokemon/[name]">
                            <p className={styles.pokemonId}>No. {pokemon.id}</p>
                            <img className={styles.pokemonImage} src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.id}.png`} alt={`${pokemon.name} picture`}></img>
                            <h2 className={styles.pokemonName}>{pokemon.name}</h2>
                        </Link>
                    </li>
                ))}
            </ul>
        </>
    )
}

export const getStaticProps = async () => {
    const res = await fetch("https://pokeapi.co/api/v2/pokemon?limit=151")
    const resJson = await res.json();
    const pokemons = resJson.results.map(pokemon => {
        const name = pokemon.name;
        // https://pokeapi.co/api/v2/pokemon/1/
        const url = pokemon.url;
        const id = url.split("/")[url.split("/").length - 2];
        return {
            name,
            url,
            id
        }
    });
    return {
        props: {
            pokemons,
        },
    }
}
```

2. Crea `src/pages/index.astro`

Utiliza el valor de retorno de la funci√≥n Next. Convierte cualquier sintaxis de Next o React a Astro, incluyendo el cambio de may√∫sculas y min√∫sculas de cualquier [atributo global de HTML](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes).

Nota que:

- `.map` ¬°simplemente funciona!

- `className` se convierte en `class`.

- `<Link>` se convierte en `<a>`.

- El fragmento `<> </>` no es necesario en la plantilla de Astro.

```astro title="src/pages/index.astro" "class" "</a>" "<a"
---
---
<ul class="plain-list pokeList">
    {pokemons.map((pokemon) => (
        <li class="pokemonListItem" key={pokemon.name}>
            <a class="pokemonContainer" href={`/pokemon/${pokemon.name}`}>
                <p class="pokemonId">No. {pokemon.id}</p>
                <img class="pokemonImage" src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.id}.png`} alt={`${pokemon.name} picture`}/>
                <h2 class="pokemonName">{pokemon.name}</h2>
            </a>
        </li>
    ))}
</ul>
```

3. Agrega cualquier importaci√≥n, propiedad y JavaScript necesario.

Nota que:

- La funci√≥n `getStaticProps` ya no es necesaria. Los datos de la API se obtienen directamente en el bloque de c√≥digo.
- Se importa un componente `<Layout>` y envuelve la plantilla de la p√°gina.

```astro ins={2,4-16,19,31} title="src/pages/index.astro"
---
import Layout from '../layouts/layout.astro';

const res = await fetch("https://pokeapi.co/api/v2/pokemon?limit=151");
const resJson = await res.json();
const pokemons = resJson.results.map(pokemon => {
    const name = pokemon.name;
    // https://pokeapi.co/api/v2/pokemon/1/
    const url = pokemon.url;
    const id = url.split("/")[url.split("/").length - 2];
    return {
        name,
        url,
        id
    }
});
---

<Layout>
  <ul class="plain-list pokeList">
      {pokemons.map((pokemon) => (
          <li class="pokemonListItem" key={pokemon.name}>
              <a class="pokemonContainer" href={`/pokemon/${pokemon.name}`}>
                  <p class="pokemonId">No. {pokemon.id}</p>
                  <img class="pokemonImage" src={`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/${pokemon.id}.png`} alt={`${pokemon.name} picture`}/>
                  <h2 class="pokemonName">{pokemon.name}</h2>
              </a>
          </li>
      ))}
  </ul>
</Layout>
```

## Recursos de la comunidad

- Video: [De NextJS a Astro: m√°s control = sitios m√°s r√°pidos](https://www.youtube.com/watch?v=PSzCtdM20Fc).

- Video: [C√≥mo Astro hizo que mi sitio sea 100 veces m√°s r√°pido](https://www.youtube.com/watch?v=cOxA3kMYtkM).

- Art√≠culo de blog: [Migrando de Next.js a Astro](https://johnzanussi.com/posts/nextjs-to-astro-migration).

- Art√≠culo de blog: [Desde NextJS a Astro](https://vanntile.com/blog/next-to-astro).
- Art√≠culo de blog: [Convirtiendo Next.js a Astro](https://ericclemmons.com/blog/converting-nextjs-to-astro).